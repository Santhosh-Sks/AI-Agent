# Use the official n8n image as base
FROM n8nio/n8n:latest

# Copy importable workflows into the image
COPY import /import

# Copy custom nodes (if any)
COPY custom-nodes /data/custom-nodes

# Set n8n data directory
ENV N8N_USER_FOLDER=/data

# Copy our custom entrypoint
COPY docker-entrypoint.sh /docker-entrypoint.sh
RUN chmod +x /docker-entrypoint.sh

# Set entrypoint
ENTRYPOINT ["/docker-entrypoint.sh"]

# Default command (n8n start)
CMD ["n8n", "start"]
